{% extends 'base.html' %}

{% block body %}
    <div style="margin-top: 100px;">
        {% for user in users %}
            {% include './partials/user_settings_partial.html' with user=user %}
        {% endfor %}
    </div>

    <a href="{% url 'new_user' %}">
        <button class="mdc-fab material-icons"
                aria-label="add"
                data-mdc-auto-init="MDCRipple"
                style="position: fixed;
                        right: 25px;
                        bottom: 25px;
                        background: #158CAF;">
            <span class="mdc-fab__icon">
                add
            </span>
        </button>
    </a>

    <script>
        // Toggle card expansion function
        function toggleCardExpansion(e) {
            // Get the hidden divs on the given card
            var card = e.parentNode;
            var cardTitleMinimized = e.querySelector('#card-title-minimized');
            var cardTitleExpanded = e.querySelector('#card-title-expanded');
            var toggleIcon = card.querySelector('#toggle-icon');
            var profileDiv = card.querySelector('#profile-div');
            var vacationPolicyDiv = card.querySelector('#vacation-policy-div');
            var updateButtonDiv = card.querySelector('#update-button-div');

            // Toggle the visibility of hidden divs
            if (toggleIcon.innerHTML == 'expand_more') {
                cardTitleMinimized.style.display = 'block';
                cardTitleExpanded.style.display = 'none';
                toggleIcon.innerHTML = 'expand_less';
                profileDiv.style.display = 'none';
                vacationPolicyDiv.style.display = 'none';
                updateButtonDiv.style.display = 'none';
            } else {
                cardTitleMinimized.style.display = 'none';
                cardTitleExpanded.style.display = 'block';
                toggleIcon.innerHTML = 'expand_more';
                profileDiv.style.display = 'block';
                vacationPolicyDiv.style.display = 'block';
                updateButtonDiv.style.display = 'block';
            }

            // Toggle read only attribute of editable fields
            var annualAccrualDays = card.querySelector('#annual-accrual-days');
            var maxAllowableAccrualDays = card.querySelector('#max-allowable-accrual-days');
            annualAccrualDays.readOnly = !annualAccrualDays.readOnly;
            maxAllowableAccrualDays.readOnly = !maxAllowableAccrualDays.readOnly;
        };
    </script>
{% endblock %}
